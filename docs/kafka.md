# Kafka

## Schema Properties

|                                   | Type                                     | Description                                                                                                                                                                    | Required   |
|:----------------------------------|:-----------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------|
| kind                              | enum: kafka                              |                                                                                                                                                                                | Yes        |
| flavor                            | enum: k8s                                |                                                                                                                                                                                | Yes        |
| version                           | enum: 0.2                                |                                                                                                                                                                                | Yes        |
| lifecycle                         | enum: ENVIRONMENT, ENVIRONMENT_BOOTSTRAP | This field describes the phase in which the resource has to be invoked (`ENVIRONMENT` or `ENVIRONMENT_BOOTSTRAP`)                                                              | No         |
| disabled                          | boolean                                  | Flag to disable the resource                                                                                                                                                   | No         |
| conditional_on_intent             | string                                   | Flag to enable the resource based on intent availability. eg mysql if mysql dashboard is required to be deployed. Note: Need to have the instance running beforehand to avail. | No         |
| provided                          | boolean                                  | Flag to tell if the resource should not be provisioned by facets                                                                                                               | No         |
| depends_on                        | array                                    | Dependencies on other resources. e.g. application x may depend on mysql                                                                                                        | No         |
| metadata.name                     | string                                   | Name of the resource                                                                                                                                                           | No         |
|                                   |                                          |     - if not specified, fallback is the `filename`                                                                                                                             |            |
| spec                              | object                                   | Specification as per resource types schema                                                                                                                                     | Yes        |
| advanced                          | object                                   | Additional fields if any for a particular implementation of a resource                                                                                                         | No         |
| spec.authenticated                | boolean                                  | Make this kafka is Password protected                                                                                                                                          | No         |
| spec.kafka_version                | string                                   | Version of kafka e.g. 3.2.3                                                                                                                                                    | No         |
| spec.persistence_enabled          | boolean                                  | Enable Persistence for this redis                                                                                                                                              | No         |
| spec.size.zookeeper.cpu           | string                                   | CPU request in format mentioned @ https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-cpu                                                | No         |
| spec.size.zookeeper.memory        | string                                   | Memory request in format mentioned @ https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-memory                                          | No         |
| spec.size.zookeeper.volume        | string                                   | Volume request in kubernetes persistent volumes                                                                                                                                | No         |
| spec.size.zookeeper.replica_count | integer                                  | Number of zookeeper instances needs to be deployed                                                                                                                             | No         |
| spec.size.kafka.cpu               | string                                   | CPU request in format mentioned @ https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-cpu                                                | No         |
| spec.size.kafka.memory            | string                                   | Memory request in format mentioned @ https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-memory                                          | No         |
| spec.size.kafka.volume            | string                                   | Volume request in kubernetes persistent volumes                                                                                                                                | No         |
| spec.size.kafka.replica_count     | integer                                  | Number of kafka instances needs to be deployed                                                                                                                                 | No         |
| advanced.k8s.kafka.values         | object                                   | Helm values as per the Bitnami kafka chart https://github.com/bitnami/charts/tree/master/bitnami/kafka                                                                         | No         |

## Outputs

|                                               | Type                            | Description                                                                                                                                | Required   | Referencing                                                          |
|:----------------------------------------------|:--------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------|:-----------|:---------------------------------------------------------------------|
| out                                           | object                          | Output given by the resource for others to refer.                                                                                          | No         | ${kafka.RESOURCE_NAME.out}                                           |
| out.interfaces.endpoint                       | string                          | A comma-separated string of endpoints in the format 'host1:port1,host2:port2'. The number of endpoints must be greater than or equal to 1. | No         | ${kafka.RESOURCE_NAME.out.interfaces.endpoint}                       |
| out.interfaces.username                       | string                          | The username to use for authentication when connecting to the datastore.                                                                   | No         | ${kafka.RESOURCE_NAME.out.interfaces.username}                       |
| out.interfaces.password                       | string                          | The password to use for authentication when connecting to the datastore.                                                                   | No         | ${kafka.RESOURCE_NAME.out.interfaces.password}                       |
| out.interfaces.connection_string              | string                          | The connection_string to use when connecting to the datastore.                                                                             | No         | ${kafka.RESOURCE_NAME.out.interfaces.connection_string}              |
| out.instances.INSTANCE_NAME.host              | string                          | The hostname or IP address of the database or cache server.                                                                                | No         | ${kafka.RESOURCE_NAME.out.instances.INSTANCE_NAME.host}              |
| out.instances.INSTANCE_NAME.port              | integer                         | The port number to use for connecting to the database or cache server.                                                                     | No         | ${kafka.RESOURCE_NAME.out.instances.INSTANCE_NAME.port}              |
| out.instances.INSTANCE_NAME.username          | string                          | The username to use for authentication when connecting to the database or cache server.                                                    | No         | ${kafka.RESOURCE_NAME.out.instances.INSTANCE_NAME.username}          |
| out.instances.INSTANCE_NAME.password          | string                          | The password to use for authentication when connecting to the database or cache server.                                                    | No         | ${kafka.RESOURCE_NAME.out.instances.INSTANCE_NAME.password}          |
| out.instances.INSTANCE_NAME.connection_string | string                          | The connection_string to use when connecting to the datastore.                                                                             | No         | ${kafka.RESOURCE_NAME.out.instances.INSTANCE_NAME.connection_string} |
| out.extra_settings.kafka.security_protocol    | enum: SASL_PLAINTEXT, PLAINTEXT | The security protocol required to connect to the kafka broker                                                                              | No         | ${kafka.RESOURCE_NAME.out.extra_settings.kafka.security_protocol}    |
| out.extra_settings.kafka.sasl_mechanism       | enum: SCRAM-SHA-256, PLAIN      | The sasl mechanism required to connect to the kafka broker                                                                                 | No         | ${kafka.RESOURCE_NAME.out.extra_settings.kafka.sasl_mechanism}       |

