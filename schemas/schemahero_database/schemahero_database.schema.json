{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "allOf": [
    {
      "$ref": "../../traits/base.schema.json"
    },
    {
      "$ref": "#/$defs/specDef"
    },
    {
      "$ref": "#/$defs/advancedDef"
    },
    {
      "$ref": "#/$defs/outDef"
    },
    {
      "type": "object",
      "properties": {
        "kind":{
          "type":"string",
          "enum": ["schemahero_database"]
        },
        "flavor":{
          "type":"string",
          "enum": ["default"]
        },
        "version":{
          "type":"string",
          "enum": ["0.1", "latest"]
        }
      }
    }
  ],
  "required": ["kind","flavor","spec","version"],
  "$defs": {
    "specDef": {
      "type": "object",
      "properties": {
        "spec": {
          "type": "object",
          "description": "Spec block of the resource",
          "properties": {
            "type": "object",
            "connection": {
              "type": "string",
              "description": "Database connection type",
              "enum": ["mysql"]
            },
            "uri": {
              "type": "string",
              "description": "Connection uri of the database."
            }
          },
          "required": ["connection","uri"]
        }
      }
    },
    "advancedDef": {
      "type": "object",
      "properties": {
        "advanced": {
          "type": "object",
          "description": "Advanced block of schemahero database",
          "properties": {
            "default": {
              "type": "object",
              "description": "Spec values as per the API reference https://schemahero.io/reference/v1alpha4/database/"
            }
          }
        }
      }
    },
    "outDef": {
      "type": "object",
      "properties": {
        "out": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the schemahero resource"
            }
          }
        }
      }
    }
  }
}